# i3 config file (v4)

set $my_browser_bind chromium
set $my_browser bash -c '[[ "$DISPLAY" == ":0" ]] && [[ $XDG_VTNR -eq 1 ]] && chromium'
set $my_file_manager i3-sensible-terminal -e ranger
set $my_alt_file_manager thunar

# button for alternative actions. Mod4 == win key
set $mod Mod4
#main button $mod button. Mod1 == Alt key
set $alt Mod1
set $bar_font "pango:Droid Sans, FontAwesome 7"
# switch to workspace
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10
# F-keys to workspaces:
bindsym $mod+F1 workspace number 11
bindsym $mod+F2 workspace number 12
bindsym $mod+F3 workspace number 13
bindsym $mod+F4 workspace number 14

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10
# F-keys to workspaces:
bindsym $mod+Shift+F1 move container to workspace number 11
bindsym $mod+Shift+F2 move container to workspace number 12
bindsym $mod+Shift+F3 move container to workspace number 13
bindsym $mod+Shift+F4 move container to workspace number 14
new_window normal 5

# assign applications to specific workspaces
assign [instance=i3test] workspace testing
for_window [class=Spotify] move to workspace number 10

for_window [window_role=GtkFileChooserDialog] floating disable
for_window [title=Guake] floating enable
for_window [title="(?i)Torrent Options"] floating disable
for_window [title="(?i)Torrent Options"] [class="Transmission-gtk" title=Transmission] mark _x, [title="(?i)Torrent Options"] move to mark _x
for_window [title="Xephyr on :50.0"] floating disable
for_window [class=Gsimplecal] move position mouse
exec $my_browser
hide_edge_borders smart

# focus doesn't follow mouse
focus_follows_mouse no

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:open Sans Mono 8

# change with i3-style:
# https://github.com/acrisci/i3-style
bar {
  status_command i3blocks -c ~/.config/i3blocks.conf
  font $bar_font
  colors {
    separator #969896
    background #1d1f21
    statusline #c5c8c6
    focused_workspace #81a2be #81a2be #1d1f21
    active_workspace #373b41 #373b41 #ffffff
    inactive_workspace #282a2e #282a2e #969896
    urgent_workspace #cc6666 #cc6666 #ffffff
  }
}

client.focused #81a2be #81a2be #1d1f21 #282a2e
client.focused_inactive #373b41 #373b41 #969896 #282a2e
client.unfocused #282a2e #282a2e #969896 #282a2e
client.urgent #373b41 #cc6666 #ffffff #cc6666

# fake-outputs 400x250+0+0,400x250+400+0,400x250+400+250,400x250+0+250
# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return exec i3-sensible-terminal
bindsym Control+Mod1+t exec i3-sensible-terminal

# bind calculator button
bindsym XF86Calculator exec $my_browser_bind
bindsym XF86WWW exec $my_browser_bind

# media / volume buttons
bindsym XF86AudioRaiseVolume exec --no-startup-id "pactl set-sink-volume @DEFAULT_SINK@ +5% && ~/bin/volume.sh"
bindsym XF86AudioLowerVolume exec --no-startup-id "pactl set-sink-volume @DEFAULT_SINK@ -5% && ~/bin/volume.sh"
bindsym XF86AudioMute exec --no-startup-id "pactl set-sink-mute @DEFAULT_SINK@ toggle && ~/bin/volume.sh"

bindsym XF86AudioPlay exec --no-startup-id playerctl play-pause
bindsym XF86AudioNext exec --no-startup-id playerctl next
bindsym $mod+Next exec --no-startup-id playerctl next
bindsym XF86AudioPrev exec --no-startup-id playerctl previous
bindsym $mod+Prior exec --no-startup-id playerctl previous

# brightness buttons
bindsym XF86MonBrightnessUp exec --no-startup-id light -A 10
bindsym XF86MonBrightnessDown exec --no-startup-id light -U 10

# start file manager
bindsym $alt+e exec --no-startup-id $my_file_manager
bindsym Control+$alt+e exec --no-startup-id $my_alt_file_manager

# kill focused window
bindsym $mod+Shift+q kill

bindsym $mod+d exec "rofi -modi combi -show combi -combi-modi window,drun"
bindsym $mod+Shift+d exec rofi -show run

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h move left 100
bindsym $mod+Shift+j move down 100
bindsym $mod+Shift+k move up 100
bindsym $mod+Shift+l move right 100

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left 100
bindsym $mod+Shift+Down move down 100
bindsym $mod+Shift+Up move up 100
bindsym $mod+Shift+Right move right 100

# split in horizontal orientation
bindsym $mod+z split h

# split in vertical orientation
bindsym $mod+v split v

# Switch border mode.
bindsym $mod+b border toggle
bindsym $mod+f fullscreen

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# toggle borderless + sticky + floating
bindsym $mod+Control+space exec --no-startup-id ~/bin/toggle-sticky.py

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
bindsym $mod+Shift+a focus child

# move the whole workspace to the next output
bindsym $mod+x move workspace to output right

bindsym $mod+Tab focus mode_toggle
bindsym $mod+Shift+Tab workspace prev_on_output

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
bindsym $mod+Shift+e exec $HOME/bin/i3-rofi-actions

# bar
bindsym $mod+Shift+M bar mode toggle

# escrotum == screenshot
# --release will trigger the binding on keyrelease event
bindsym --release $mod+Shift+Print exec escrotum -s '%d-%m-%Y-%H-%M-%S_$wx$h_escrotum.png' -e 'mv $f ~/Pictures/Screenshots/'
bindsym --release Print exec escrotum '%d-%m-%Y-%H-%M-%S_$wx$h_escrotum.png' -e 'mv $f ~/Pictures/Screenshots/'
bindsym --release $mod+Print exec imgur-screenshot

# Scratchpad commands
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

bindsym $mod+backslash exec keepassxc

bindsym $mod+o exec --no-startup-id i3-msg workspace number $($HOME/bin/i3-next-available-workspace.py)
bindsym $mod+Shift+o exec --no-startup-id i3-msg move window to workspace $($HOME/bin/i3-next-available-workspace.py) && i3-msg workspace number $_

bindsym Control+space exec --no-startup-id dunstctl close
bindsym Control+Shift+space exec --no-startup-id dunstctl close-all
bindsym Control+Shift+period exec --no-startup-id dunstctl context
bindsym Control+grave exec --no-startup-id dunstctl history-pop
# resize window (you can also use the mouse for that)
mode "resize" {
    # These bindings trigger as soon as you enter the resize mode

    # Pressing left will shrink the window’s width.
    # Pressing right will grow the window’s width.
    # Pressing up will shrink the window’s height.
    # Pressing down will grow the window’s height.
    bindsym j resize shrink width 10 px or 10 ppt
    bindsym k resize grow height 10 px or 10 ppt
    bindsym l resize shrink height 10 px or 10 ppt
    bindsym semicolon resize grow width 10 px or 10 ppt

    # same bindings, but for the arrow keys
    bindsym Left resize shrink width 10 px or 10 ppt
    bindsym Down resize grow height 10 px or 10 ppt
    bindsym Up resize shrink height 10 px or 10 ppt
    bindsym Right resize grow width 10 px or 10 ppt

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym r --release exec --no-startup-id ~/bin/draw-resize.sh $(xdotool getactivewindow), mode "default"
}
bindsym $mod+r mode "resize"

mode "mark" {
    bindsym Escape mode "default"
    bindsym $mod+Shift+q mode "default"

    bindsym a mark a, mode "default"
    bindsym b mark b, mode "default"
    bindsym c mark c, mode "default"
    bindsym d mark d, mode "default"
    bindsym e mark e, mode "default"
    bindsym f mark f, mode "default"
    bindsym g mark g, mode "default"
    bindsym h mark h, mode "default"
    bindsym i mark i, mode "default"
    bindsym j mark j, mode "default"
    bindsym k mark k, mode "default"
    bindsym l mark l, mode "default"
    bindsym m mark m, mode "default"
    bindsym n mark n, mode "default"
    bindsym o mark o, mode "default"
    bindsym p mark p, mode "default"
    bindsym q mark q, mode "default"
    bindsym r mark r, mode "default"
    bindsym s mark s, mode "default"
    bindsym t mark t, mode "default"
    bindsym u mark u, mode "default"
    bindsym v mark v, mode "default"
    bindsym w mark w, mode "default"
    bindsym x mark x, mode "default"
    bindsym y mark y, mode "default"
    bindsym z mark z, mode "default"
    bindsym $mod+a mark a, mode "default"
    bindsym $mod+b mark b, mode "default"
    bindsym $mod+c mark c, mode "default"
    bindsym $mod+d mark d, mode "default"
    bindsym $mod+e mark e, mode "default"
    bindsym $mod+f mark f, mode "default"
    bindsym $mod+g mark g, mode "default"
    bindsym $mod+h mark h, mode "default"
    bindsym $mod+i mark i, mode "default"
    bindsym $mod+j mark j, mode "default"
    bindsym $mod+k mark k, mode "default"
    bindsym $mod+l mark l, mode "default"
    bindsym $mod+m mark m, mode "default"
    bindsym $mod+n mark n, mode "default"
    bindsym $mod+o mark o, mode "default"
    bindsym $mod+p mark p, mode "default"
    bindsym $mod+q mark q, mode "default"
    bindsym $mod+r mark r, mode "default"
    bindsym $mod+s mark s, mode "default"
    bindsym $mod+t mark t, mode "default"
    bindsym $mod+u mark u, mode "default"
    bindsym $mod+v mark v, mode "default"
    bindsym $mod+w mark w, mode "default"
    bindsym $mod+x mark x, mode "default"
    bindsym $mod+y mark y, mode "default"
    bindsym $mod+z mark z, mode "default"
}
bindsym $mod+m mode "mark"

mode "jump" {
    bindsym Escape mode "default"
    bindsym $mod+Shift+q mode "default"
    bindsym apostrophe workspace back_and_forth, mode "default"
    bindsym $mod+apostrophe workspace back_and_forth, mode "default"

    bindsym a [con_mark=a] focus, mode "default"
    bindsym b [con_mark=b] focus, mode "default"
    bindsym c [con_mark=c] focus, mode "default"
    bindsym d [con_mark=d] focus, mode "default"
    bindsym e [con_mark=e] focus, mode "default"
    bindsym f [con_mark=f] focus, mode "default"
    bindsym g [con_mark=g] focus, mode "default"
    bindsym h [con_mark=h] focus, mode "default"
    bindsym i [con_mark=i] focus, mode "default"
    bindsym j [con_mark=j] focus, mode "default"
    bindsym k [con_mark=k] focus, mode "default"
    bindsym l [con_mark=l] focus, mode "default"
    bindsym m [con_mark=m] focus, mode "default"
    bindsym n [con_mark=n] focus, mode "default"
    bindsym o [con_mark=o] focus, mode "default"
    bindsym p [con_mark=p] focus, mode "default"
    bindsym q [con_mark=q] focus, mode "default"
    bindsym r [con_mark=r] focus, mode "default"
    bindsym s [con_mark=s] focus, mode "default"
    bindsym t [con_mark=t] focus, mode "default"
    bindsym u [con_mark=u] focus, mode "default"
    bindsym v [con_mark=v] focus, mode "default"
    bindsym w [con_mark=w] focus, mode "default"
    bindsym x [con_mark=x] focus, mode "default"
    bindsym y [con_mark=y] focus, mode "default"
    bindsym z [con_mark=z] focus, mode "default"
    bindsym $mod+a [con_mark=a] focus, mode "default"
    bindsym $mod+b [con_mark=b] focus, mode "default"
    bindsym $mod+c [con_mark=c] focus, mode "default"
    bindsym $mod+d [con_mark=d] focus, mode "default"
    bindsym $mod+e [con_mark=e] focus, mode "default"
    bindsym $mod+f [con_mark=f] focus, mode "default"
    bindsym $mod+g [con_mark=g] focus, mode "default"
    bindsym $mod+h [con_mark=h] focus, mode "default"
    bindsym $mod+i [con_mark=i] focus, mode "default"
    bindsym $mod+j [con_mark=j] focus, mode "default"
    bindsym $mod+k [con_mark=k] focus, mode "default"
    bindsym $mod+l [con_mark=l] focus, mode "default"
    bindsym $mod+m [con_mark=m] focus, mode "default"
    bindsym $mod+n [con_mark=n] focus, mode "default"
    bindsym $mod+o [con_mark=o] focus, mode "default"
    bindsym $mod+p [con_mark=p] focus, mode "default"
    bindsym $mod+q [con_mark=q] focus, mode "default"
    bindsym $mod+r [con_mark=r] focus, mode "default"
    bindsym $mod+s [con_mark=s] focus, mode "default"
    bindsym $mod+t [con_mark=t] focus, mode "default"
    bindsym $mod+u [con_mark=u] focus, mode "default"
    bindsym $mod+v [con_mark=v] focus, mode "default"
    bindsym $mod+w [con_mark=w] focus, mode "default"
    bindsym $mod+x [con_mark=x] focus, mode "default"
    bindsym $mod+y [con_mark=y] focus, mode "default"
    bindsym $mod+z [con_mark=z] focus, mode "default"
}
bindsym $mod+apostrophe mode "jump"

mode "swap" {
    bindsym Escape mode "default"
    bindsym $mod+Shift+q mode "default"

    bindsym a swap with mark a, mode "default"
    bindsym b swap with mark b, mode "default"
    bindsym c swap with mark c, mode "default"
    bindsym d swap with mark d, mode "default"
    bindsym e swap with mark e, mode "default"
    bindsym f swap with mark f, mode "default"
    bindsym g swap with mark g, mode "default"
    bindsym h swap with mark h, mode "default"
    bindsym i swap with mark i, mode "default"
    bindsym j swap with mark j, mode "default"
    bindsym k swap with mark k, mode "default"
    bindsym l swap with mark l, mode "default"
    bindsym m swap with mark m, mode "default"
    bindsym n swap with mark n, mode "default"
    bindsym o swap with mark o, mode "default"
    bindsym p swap with mark p, mode "default"
    bindsym q swap with mark q, mode "default"
    bindsym r swap with mark r, mode "default"
    bindsym s swap with mark s, mode "default"
    bindsym t swap with mark t, mode "default"
    bindsym u swap with mark u, mode "default"
    bindsym v swap with mark v, mode "default"
    bindsym w swap with mark w, mode "default"
    bindsym x swap with mark x, mode "default"
    bindsym y swap with mark y, mode "default"
    bindsym z swap with mark z, mode "default"
    bindsym $mod+a swap with mark a, mode "default"
    bindsym $mod+b swap with mark b, mode "default"
    bindsym $mod+c swap with mark c, mode "default"
    bindsym $mod+d swap with mark d, mode "default"
    bindsym $mod+e swap with mark e, mode "default"
    bindsym $mod+f swap with mark f, mode "default"
    bindsym $mod+g swap with mark g, mode "default"
    bindsym $mod+h swap with mark h, mode "default"
    bindsym $mod+i swap with mark i, mode "default"
    bindsym $mod+j swap with mark j, mode "default"
    bindsym $mod+k swap with mark k, mode "default"
    bindsym $mod+l swap with mark l, mode "default"
    bindsym $mod+m swap with mark m, mode "default"
    bindsym $mod+n swap with mark n, mode "default"
    bindsym $mod+o swap with mark o, mode "default"
    bindsym $mod+p swap with mark p, mode "default"
    bindsym $mod+q swap with mark q, mode "default"
    bindsym $mod+r swap with mark r, mode "default"
    bindsym $mod+s swap with mark s, mode "default"
    bindsym $mod+t swap with mark t, mode "default"
    bindsym $mod+u swap with mark u, mode "default"
    bindsym $mod+v swap with mark v, mode "default"
    bindsym $mod+w swap with mark w, mode "default"
    bindsym $mod+x swap with mark x, mode "default"
    bindsym $mod+y swap with mark y, mode "default"
    bindsym $mod+z swap with mark z, mode "default"
}
bindsym $mod+Shift+apostrophe mode "swap"

mode  "Passthrough Mode - Press $mod+F12 to exit" {
        bindsym $mod+F12 mode "default"
}
bindsym $mod+F12 mode "Passthrough Mode - Press $mod+F12 to exit"
